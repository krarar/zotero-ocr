<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شركة النسيم</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
  
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

         :root {
            --primary-color: #2C3E50;
            --secondary-color: #3498DB;
            --accent-color: #E74C3C;
            --background-color: #F8F9FA;
            --text-color: #2C3E50;
            --text-light: #ffffff;
            --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            --hover-transition: all 0.3s ease;
        }

        /* إعادة تعيين الأنماط الأساسية */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
        }

        body {
            background-color: var(--background-color);
            direction: rtl;
        }

        /* تحديث تصميم الهيدر */
        .header {
            background-color: var(--primary-color);
            height: 60px; /* تقليل ارتفاع الهيدر */
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1rem;
        }

        .logo {
            font-size: 1.5rem;
            color: var(--text-light);
            text-decoration: none;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo i {
            color: var(--secondary-color);
        }

        /* تحديث أزرار الهيدر */
        .header-icons {
            display: flex;
            gap: 1rem;
        }

        .icon-btn {
            color: var(--text-light);
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: var(--hover-transition);
            position: relative;
        }

        .icon-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        /* تحديث تصميم البطاقات */
        .products-container {
            max-width: 1200px;
            margin: 80px auto 0;
            padding: 1rem;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .product-card {
            background: var(--text-light);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--hover-transition);
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            transition: var(--hover-transition);
        }

        .product-info {
            padding: 1.25rem;
        }

        .product-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .product-price {
            font-size: 1.2rem;
            color: var(--accent-color);
            font-weight: bold;
            margin: 0.5rem 0;
        }

        /* شريط الأدوات السفلي */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--text-light);
            padding: 0.75rem;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-around;
            z-index: 1000;
        }

        .bottom-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-color);
            text-decoration: none;
            font-size: 0.8rem;
            transition: var(--hover-transition);
        }

        .bottom-nav-item i {
            font-size: 1.2rem;
            margin-bottom: 0.25rem;
        }

        .bottom-nav-item:hover {
            color: var(--secondary-color);
        }

        /* تحديث النوافذ المنبثقة */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: var(--text-light);
            border-radius: 16px;
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* تحديثات إضافية للتفاعلات */
    

        /* تحديث التنبيهات */
        .notification {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--secondary-color);
            color: var(--text-light);
            padding: 1rem 2rem;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            animation: notificationSlideUp 0.3s ease-out;
            z-index: 2001;
        }

        @keyframes notificationSlideUp {
            from {
                transform: translate(-50%, 100%);
                opacity: 0;
            }
            to {
                transform: translate(-50%, 0);
                opacity: 1;
            }
        }
        .icon-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--secondary-color);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Product Grid - Updated */
        .products-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .product-card {
            background-color: var(--text-light);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--hover-transition);
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            transition: var(--hover-transition);
        }

        .product-image:hover {
            transform: scale(1.05);
        }

        .product-info {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .product-title {
            font-size: 1.2rem;
            color: var(--text-color);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .product-description {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .product-price {
            color: var(--secondary-color);
            font-size: 1.3rem;
            font-weight: bold;
        }

        .product-actions {
            padding: 0 1.5rem 1.5rem;
            display: flex;
            gap: 1rem;
            align-items: center;
        }

       .add-to-cart {
            background-color: #f8f9fa;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--hover-transition);
        }

        .add-to-cart:hover {
            background-color: #e9ecef;
            transform: translateY(-2px);
        }
        
        .add-to-cart i {
            font-size: 1.2rem;
            color: var(--accent-color);
        }

        .favorite-btn {
            background-color: #f8f9fa;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--hover-transition);
        }

        .favorite-btn:hover {
            background-color: #e9ecef;
        }

        .favorite-btn i {
            font-size: 1.2rem;
            color: var(--secondary-color);
        }

        /* Modal Styles - Updated */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--text-light);
            padding: 2rem;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            position: relative;
            box-shadow: var(--card-shadow);
        }

        .close-btn {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            transition: var(--hover-transition);
        }

        .close-btn:hover {
            color: var(--secondary-color);
        }

        /* Search Form - Updated */
        .search-form {
            width: 100%;
            margin-top: 1rem;
        }

        .search-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--hover-transition);
        }

        .search-input:focus {
            border-color: var(--accent-color);
            outline: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .products-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
                padding: 0 0.5rem;
            }

            .product-info {
                padding: 1rem;
            }

            .product-actions {
                padding: 0 1rem 1rem;
            }

            .product-image {
                height: 150px;
            }

            .product-title {
                font-size: 1rem;
            }

            .product-price {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 480px) {
            .header-icons {
                gap: 1rem;
            }

            .icon-btn {
                font-size: 1.1rem;
            }

            .product-card {
                border-radius: 8px;
            }
        }

        /* Slider - Updated */
        .slider {
            margin-top: 70px;
            position: relative;
            overflow: hidden;
            height: 400px;
        }

        .slider-container {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }

        .slide {
            min-width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .slide-content {
            position: absolute;
            bottom: 2rem;
            right: 2rem;
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem 2rem;
            border-radius: 8px;
            color: var(--text-light);
        }
        
        slider {
    margin-top: 60px;
    position: relative;
    overflow: hidden;
    height: 400px;
    background: #f5f5f5;
}

.slider-container {
    display: flex;
    height: 100%;
    transition: transform 0.5s ease-in-out;
}

.slide {
    min-width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    position: relative;
}

.slide-content {
    position: absolute;
    bottom: 2rem;
    right: 2rem;
    background: rgba(0, 0, 0, 0.7);
    padding: 1.5rem 2rem;
    border-radius: 8px;
    color: white;
    transform: translateY(0);
    transition: transform 0.3s ease;
}

.slide-content h2 {
    margin-bottom: 0.5rem;
    font-size: 1.5rem;
}

.slider-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    padding: 1rem;
    cursor: pointer;
    font-size: 1.2rem;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.slider-btn:hover {
    background: rgba(0, 0, 0, 0.8);
}

.slider-btn.prev {
    left: 1rem;
}

.slider-btn.next {
    right: 1rem;
}

.slider-dots {
    position: absolute;
    bottom: 1rem;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 0.5rem;
}

.dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    cursor: pointer;
    transition: all 0.3s ease;
}

.dot.active {
    background: white;
    transform: scale(1.2);
}

        /* Cart Items - Updated */
        .cart-items {
            max-height: 400px;
            overflow-y: auto;
            margin: 1rem 0;
        }

        .cart-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }

        .cart-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
        }

        .cart-total {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px solid #eee;
            text-align: left;
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--text-color);
        }

        /* Footer - Updated */
        .footer {
            background-color: var(--primary-color);
            color: var(--text-light);
            padding: 3rem 1rem;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-section h3 {
            color: var(--accent-color);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.8rem;
        }

        .footer-section a {
            color: var(--text-light);
            text-decoration: none;
            transition: var(--hover-transition);
        }

        .footer-section a:hover {
            color: var(--accent-color);
        }

        /* Notification - Updated */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--accent-color);
            color: var(--text-light);
            padding: 1rem 2rem;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            animation: slideIn 0.3s ease-out;
            z-index: 1000;
        }
    </style>
</head>

<body>
    <!-- الأقسام الأخرى من HTML تبقى كما هي -->
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="#" class="logo"> الشريفي</a>
            <div class="header-icons">
                <button class="icon-btn" onclick="toggleSearch()">
                    <i class="fas fa-search"></i>
                </button>
                <button class="icon-btn" onclick="toggleAuth()">
                    <i class="fas fa-user"></i>
                </button>
                <button class="icon-btn" onclick="toggleFavorites()">
                    <i class="fas fa-heart"></i>
                    <span class="badge" id="favorites-count">0</span>
                </button>
                <button class="icon-btn" onclick="toggleCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="badge" id="cart-count">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Modals remain the same -->
    <!-- Search Modal -->
    <div class="modal" id="search-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="toggleSearch()">&times;</button>
            <h2>البحث</h2>
            <form class="search-form">
                <input type="search" class="search-input" placeholder="ابحث عن المنتجات...">
            </form>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="auth-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="toggleAuth()">&times;</button>
            <h2>تسجيل الدخول</h2>
            <form class="auth-form">
                <input type="email" class="auth-input" placeholder="البريد الإلكتروني">
                <input type="password" class="auth-input" placeholder="كلمة المرور">
                <button type="submit" class="auth-btn">
                    <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
                </button>
            </form>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal" id="cart-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="toggleCart()">&times;</button>
            <h2>سلة التسوق</h2>
            <div class="cart-items" id="cart-items">
                <!-- Cart items will be dynamically added here -->
            </div>
            <div class="cart-total">
                المجموع: <span id="cart-total">0</span> دينار
            </div>
            <button class="complete-purchase" onclick="completePurchase()">
                <i class="fas fa-check"></i> إتمام الشراء
            </button>
        </div>
    </div>

    <!-- Favorites Modal -->
    <div class="modal" id="favorites-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="toggleFavorites()">&times;</button>
            <h2>المفضلة</h2>
            <div class="cart-items" id="favorites-items">
                <!-- Favorite items will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Slider -->
     <section class="slider">
        <div class="slider-container" id="slider-container">
            <div class="slide" style="background-image: url('https://firebasestorage.googleapis.com/v0/b/messageemeapp.appspot.com/o/%D8%B4%D8%B1%D9%83%D9%87%20%D8%A7%D9%84%D9%86%D8%B3%D9%8A%D9%85%2F1736751236542.jpg?alt=media&token=e47fcd9f-5bd1-42ce-b2ae-11cbe3ce7d63')">
                <div class="slide-content">
                    <h2>عروض خاصة</h2>
                    <p>خصم حتى 50% على جميع المنتجات</p>
                </div>
            </div>
               <div class="slider-container" id="slider-container">
            <div class="slide" style="background-image: url('https://firebasestorage.googleapis.com/v0/b/messageemeapp.appspot.com/o/main-qimg-d2558bce634416e9606f2fcb65f39b3a-lq.jpeg?alt=media&token=e05fb310-7feb-46f6-aa93-60b8f06c309e')">
                <div class="slide-content">
                    <h2>عروض خاصة</h2>
                    <p>خصم حتى 50% على جميع المنتجات</p>
                </div>
            </div>
        </div>
    
    <button class="slider-btn prev" onclick="prevSlide()">&#10094;</button>
    <button class="slider-btn next" onclick="nextSlide()">&#10095;</button>
    <div class="slider-dots"></div>
</section>

<div id="filter-bar-root"></div>

    <!-- Products Grid -->
    <section class="products-container" id="products-container">
        <!-- Products will be dynamically added here -->
    </section>
         <!-- شريط الأدوات السفلي -->
    <nav class="bottom-nav">
        <a href="#" class="bottom-nav-item">
            <i class="fas fa-home"></i>
            الرئيسية
        </a>
        <a href="#" class="bottom-nav-item">
            <i class="fas fa-tags"></i>
            الأقسام
        </a>
        <a href="#" class="bottom-nav-item">
            <i class="fas fa-heart"></i>
            المفضلة
        </a>
        <a href="#" class="bottom-nav-item">
            <i class="fas fa-user"></i>
            حسابي
        </a>
    </nav>

    </div>


   

    <script>
        // State Management
        let cart = [];
        let favorites = [];
        let products = [
            {
                id: 1,
                name: " مكتب النسيم",
                price: 100.000,
                image: "https://firebasestorage.googleapis.com/v0/b/messageemeapp.appspot.com/o/%D8%B4%D8%B1%D9%83%D9%87%20%D8%A7%D9%84%D9%86%D8%B3%D9%8A%D9%85%2F1736751260286.jpg?alt=media&token=82c87bda-75b4-4970-81ad-7afc550f124c",
                description: "وصف المنتج الأول"
            },
            {
                id: 2,
                name: "مكتب النسيم ",
                price: 150.000,
                image: "https://firebasestorage.googleapis.com/v0/b/messageemeapp.appspot.com/o/%D8%B4%D8%B1%D9%83%D9%87%20%D8%A7%D9%84%D9%86%D8%B3%D9%8A%D9%85%2F1736751245732.jpg?alt=media&token=a894ca7d-7aa9-4cb3-bb58-1567a981d3cc",
                description: "وصف المنتج الثاني"
            },
            {
                id: 3,
                name: " مكتب النسيم",
                price: 50.000,
                image: "https://firebasestorage.googleapis.com/v0/b/messageemeapp.appspot.com/o/%D8%B4%D8%B1%D9%83%D9%87%20%D8%A7%D9%84%D9%86%D8%B3%D9%8A%D9%85%2F1736751236542.jpg?alt=media&token=e47fcd9f-5bd1-42ce-b2ae-11cbe3ce7d63",
                description: "وصف المنتج الثالث"
            },
            {
                id: 4,
                name: " مكتب النسيم",
                price: 25.000,
                image: "https://firebasestorage.googleapis.com/v0/b/messageemeapp.appspot.com/o/%D8%B4%D8%B1%D9%83%D9%87%20%D8%A7%D9%84%D9%86%D8%B3%D9%8A%D9%85%2F1736751260684.jpg?alt=media&token=0db74fc8-db4b-4144-92a5-af198c8b1432",
                description: "وصف المنتج الرابع"
            }
        ];

        // Modal Management
        function toggleModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
        }

        function toggleSearch() {
            toggleModal('search-modal');
        }

        function toggleAuth() {
            toggleModal('auth-modal');
        }

        function toggleCart() {
            toggleModal('cart-modal');
            renderCart();
        }

        function toggleFavorites() {
            toggleModal('favorites-modal');
            renderFavorites();
        }

        // Cart Functions
        function addToCart(product) {
            cart.push(product);
            updateCartCount();
            renderCart();
            showNotification('تمت إضافة المنتج إلى السلة');
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartCount();
            renderCart();
            showNotification('تم إزالة المنتج من السلة');
        }

        function updateCartCount() {
            document.getElementById('cart-count').textContent = cart.length;
        }

        function renderCart() {
            const cartContainer = document.getElementById('cart-items');
            cartContainer.innerHTML = '';
            let total = 0;

            cart.forEach(item => {
                total += item.price;
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}">
                    <div>
                        <h3>${item.name}</h3>
                        <p>${item.price} دينار</p>
                    </div>
                    <button onclick="removeFromCart(${item.id})" class="icon-btn">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                cartContainer.appendChild(cartItem);
            });

            document.getElementById('cart-total').textContent = total;
        }

        function completePurchase() {
            if (cart.length === 0) {
                showNotification('السلة فارغة');
                return;
            }

            cart = [];
            updateCartCount();
            renderCart();
            toggleCart();
            showNotification('تم إتمام الشراء بنجاح');
        }

        // Favorites Functions
        function toggleFavorite(productId) {
            const index = favorites.indexOf(productId);
            if (index === -1) {
                favorites.push(productId);
                showNotification('تمت إضافة المنتج إلى المفضلة');
            } else {
                favorites.splice(index, 1);
                showNotification('تم إزالة المنتج من المفضلة');
            }
            updateFavoritesCount();
            renderFavorites();
            renderProducts(); // Update heart icons in product grid
        }

        function updateFavoritesCount() {
            document.getElementById('favorites-count').textContent = favorites.length;
        }

        function renderFavorites() {
            const favoritesContainer = document.getElementById('favorites-items');
            favoritesContainer.innerHTML = '';

            favorites.forEach(productId => {
                const product = products.find(p => p.id === productId);
                if (product) {
                    const favoriteItem = document.createElement('div');
                    favoriteItem.className = 'cart-item';
                    favoriteItem.innerHTML = `
                        <img src="${product.image}" alt="${product.name}">
                        <div>
                            <h3>${product.name}</h3>
                            <p>${product.price} دينار</p>
                        </div>
                        <button onclick="toggleFavorite(${product.id})" class="icon-btn">
                            <i class="fas fa-heart" style="color: var(--secondary-color);"></i>
                        </button>
                    `;
                    favoritesContainer.appendChild(favoriteItem);
                }
            });
        }

function validateSlides() {
    Array.from(slides).forEach((slide, index) => {
        const backgroundImage = slide.style.backgroundImage;
        const img = new Image();

        img.src = backgroundImage.slice(5, -2); // إزالة 'url("")'
        img.onerror = () => {
            console.warn(`الصورة في الشريحة رقم ${index + 1} غير صالحة أو غير موجودة.`);
        };
    });
}

document.addEventListener('DOMContentLoaded', validateSlides);

        // Product Rendering
        function renderProducts() {
            const container = document.getElementById('products-container');
            container.innerHTML = '';

            products.forEach(product => {
                const isFavorite = favorites.includes(product.id);
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-price">${product.price} دينار</div>
                    </div>
                    <div class="product-actions">
                        <button onclick="addToCart({
                            id: ${product.id},
                            name: '${product.name}',
                            price: ${product.price},
                            image: '${product.image}',
                            description: '${product.description}'
                        })" class="add-to-cart">
                            <i class="fas fa-cart-plus"></i>
                              
                        </button>
                        <button onclick="toggleFavorite(${product.id})" class="favorite-btn">
                            <i class="fas fa-heart" style="color: ${isFavorite ? 'var(--secondary-color)' : '#666'};"></i>
                        </button>
                    </div>
                `;
                container.appendChild(productCard);
            });
        }

        // Slider Functionality
        let currentSlide = 0;
        const sliderContainer = document.getElementById('slider-container');
        const slides = sliderContainer.children;

        function nextSlide() {
    currentSlide = (currentSlide + 1) % slides.length;
    const backgroundImage = slides[currentSlide].style.backgroundImage;

    // تجاوز الشرائح غير الصالحة
    if (!backgroundImage || backgroundImage.includes('none') || backgroundImage === 'url("")') {
        nextSlide();
    } else {
        updateSlider();
    }
}

function prevSlide() {
    currentSlide = (currentSlide - 1 + slides.length) % slides.length;
    const backgroundImage = slides[currentSlide].style.backgroundImage;

    // تجاوز الشرائح غير الصالحة
    if (!backgroundImage || backgroundImage.includes('none') || backgroundImage === 'url("")') {
        prevSlide();
    } else {
        updateSlider();
    }
}


       function updateSlider() {
    const container = document.getElementById('slider-container');
    container.style.transform = `translateX(${currentSlide * -100}%)`;

    // التحقق من وجود صورة صالحة في الشريحة الحالية
    const currentSlideElement = slides[currentSlide];
    const backgroundImage = currentSlideElement.style.backgroundImage;

    if (!backgroundImage || backgroundImage.includes('none') || backgroundImage === 'url("")') {
        console.error(`الشريحة رقم ${currentSlide + 1} لا تحتوي على صورة صالحة.`);
        showNotification(`الشريحة رقم ${currentSlide + 1} لا تحتوي على صورة.`);
        nextSlide(); // الانتقال تلقائيًا إلى الشريحة التالية
        return;
    }

    // تحديث النقاط النشطة
    const dots = document.querySelectorAll('.dot');
    dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentSlide);
    });
}



function createDots() {
    const dotsContainer = document.querySelector('.slider-dots');
    dotsContainer.innerHTML = ''; // إزالة النقاط القديمة

    Array.from(slides).forEach((_, index) => {
        const dot = document.createElement('div');
        dot.className = 'dot';
        dot.addEventListener('click', () => {
            currentSlide = index;
            updateSlider();
        });
        dotsContainer.appendChild(dot);
    });

    // تعيين النقطة الأولى كفعالة
    dotsContainer.firstChild.classList.add('active');
}

document.addEventListener('DOMContentLoaded', () => {
    createDots();
    setInterval(() => {
        const validSlides = Array.from(slides).filter(slide =>
            slide.style.backgroundImage &&
            !slide.style.backgroundImage.includes('none') &&
            slide.style.backgroundImage !== 'url("")'
        );

        if (validSlides.length > 0) {
            nextSlide();
        } else {
            showNotification('لا توجد صور صالحة للتنقل بينها.');
        }
    }, 5000); // تغيير تلقائي كل 5 ثوانٍ
});

function validateSlides() {
    Array.from(slides).forEach((slide, index) => {
        const backgroundImage = slide.style.backgroundImage;
        if (!backgroundImage || backgroundImage.includes('none') || backgroundImage === 'url("")') {
            console.warn(`الصورة غير متوفرة للشريحة رقم ${index + 1}`);
        }
    });
}

document.addEventListener('DOMContentLoaded', validateSlides);




        // Notifications
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Search Functionality
        document.querySelector('.search-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const searchTerm = this.querySelector('input').value.toLowerCase();
            const filteredProducts = products.filter(product =>
                product.name.toLowerCase().includes(searchTerm) ||
                product.description.toLowerCase().includes(searchTerm)
            );
            renderFilteredProducts(filteredProducts);
            toggleSearch();
        });

        function renderFilteredProducts(filteredProducts) {
            const container = document.getElementById('products-container');
            container.innerHTML = '';

            if (filteredProducts.length === 0) {
                container.innerHTML = '<p class="no-results">لا توجد نتائج للبحث</p>';
                return;
            }

            filteredProducts.forEach(product => {
                const isFavorite = favorites.includes(product.id);
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-price">${product.price} دينار</div>
                    </div>
                    <div class="product-actions">
                        <button onclick="addToCart({
                            id: ${product.id},
                            name: '${product.name}',
                            price: ${product.price},
                            image: '${product.image}',
                            description: '${product.description}'
                        })" class="add-to-cart">
                            <i class="fas fa-cart-plus"></i>
                            إضافة إلى السلة
                        </button>
                        <button onclick="toggleFavorite(${product.id})" class="favorite-btn">
                            <i class="fas fa-heart" style="color: ${isFavorite ? 'var(--secondary-color)' : '#666'};"></i>
                        </button>
                    </div>
                `;
                container.appendChild(productCard);
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderProducts();
            setInterval(nextSlide, 5000);
        });
        
        const filterBarRoot = document.getElementById('filter-bar-root');
  const root = ReactDOM.createRoot(filterBarRoot);
  root.render(React.createElement(FilterBar));
    </script>
</body>
</html>